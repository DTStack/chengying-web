---
id: install
title: 安装部署
sidebar_position: 1
---

[![License](https://img.shields.io/badge/license-Apache%202-4EB1BA.svg)](https://www.apache.org/licenses/LICENSE-2.0.html)

### 添加集群
在集群下部署组件前要求用户先完成集群添加。进入"部署中心-集群管理-添加集群"选择集群类型进行集群添加。
![q1](/img/introduction/cluster.png)

#### 添加主机集群
选择 “创建主机集群”，填写基础信息包括 “集群名称、集群描述、集群标签”，点击 “下一步” 进入集群主机添加和管理。

#### 添加主机
主机接入，指将主机添加进集群，用于产品服务的部署。包含2种方式：账号接入、命令行接入。
1. 账号接入：通过在界面上配置用户名、密码的方式接入主机
    * 主机分组：在集群内主机较多的情况下，可对主机进行分组，当无主机分组时，可新建分组。
    * 机器IP：可输入多个IP、IP端。多个IP之间用英文逗号隔开，IP端用'-'连接。系统接入时将按照顺序接入。
    * SSH端口：一般默认填写22端口。
    * 登录方式：密钥文件或密码接入。
    * 密钥文件：选择密钥登录方式要求用户上传密钥文件。
    * 用户名、密码：接入主机的用户需要 sudo+NOPASSWD 权限。
    
2. 命令行接入：通过在服务器上执行命令的方式接入主机。
```
curl 'http://local_ip:8889/api/v1/deploy/sidecar/install/shell?TargetPath=/opt/dtstack/easymanager/easyagent&CallBack=aHR0cDovL21hdHJpeDo4ODY0L2FwaS92Mi9hZ2VudC9pbnN0YWxsL2NhbGxiYWNrP2FpZD0tMQ==&Type=hosts&ClusterId=1&Roles=' | sh
```
local_ip为部署Chengying的机器ip。

#### 查看主机
主机接入后，可在主机列表中查看集群中所有的主机，以及每个主机的状态。包含主机最近心跳时间、主机创建时间、启动用户、agent状态、初始化状态。
主机安装会经过2个过程：管控安装-主机初始化，若某一步安装失败，请查看具体日志。主机安装失败时，可查看具体的失败日志。

### 集群列表
已添加的集群可在"部署中心-集群管理-集群列表"进行查看和管理。该页面展示集群的状态、资源使用、节点数等基本信息，可对集群进行详情查看、编辑及删除操作。
![q2](/img/introduction/clusterList.png)

### 部署组件
在部署组件前，我们需要先上传要部署的组件，并通过全流程的安装部署向导，让运维人员轻松完成产品的安装部署。
产品安装需经过四步：上传组件安装包—​选择集群—​选择产品包—​配置服务—​执行部署。

#### 上传组件安装包
用户可在 "部署中心-组件管理-组件列表"页面进行组件安装包上传，并可对上传的组件包进行部署、删除等管理操作。
鼠标hover “上传组件安装包”，平台提供两种方式进行组件包上传——上传本地包、来自网络。
- 上传本地包：点击选择本地产品包进行上传。
- 来自网络：点击可支持输入多个产品包地址直接从网络下载至平台。

![q3](/img/introduction/clusterPackage.png)

#### 选择集群
步骤一：选择部署方式及集群。
![q3](/img/introduction/chooseCluster.png)

#### 选择产品包
步骤二：选择需要部署的组件包与服务。
- 选择产品包与服务：产品包选择后，会显示该产品包下各服务的名称、版本。若为置灰的服务，则是该组件依赖的服务。
- 产品包设置：设置该应用启动时的用户名，但仅以root用户接入主机时，该设置有效。
  





