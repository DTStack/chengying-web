---
id: smoothUpgrade
title: 平滑升级
---

[![License](https://img.shields.io/badge/license-Apache%202-4EB1BA.svg)](https://www.apache.org/licenses/LICENSE-2.0.html)


平滑升级概念：组件包部署成功后，需要针对组件包中某个服务单独进行升级，达到一个服务存在两个版本同时运行的状态

## 特性

与普通升级不同的是，普通升级同一时间只能部署单个版本的组件，平滑升级的可以实现多版本共存

前提要求:

- 产品包中包含sql组件，服务名称后缀为Sql

- 产品包中包含数据库备份脚本，数据库回滚脚本

- chengying中包含多个版本

- 需要第三方数据库支持




## 升级

### 组件环境

用户可在"部署中心-集群详情-已部署组件"，点击升级按钮，选择平滑升级

![q1](/img/upgrade/20220908135645.jpg)

:::tip
平滑升级，对升级的组件要求如下:
:::

- chengying中包含该组件的多个版本

- 包含有服务部署在多台agent上（一个服务满足即可）

### 备份数据库

选择目标组件-点击开始备份,查看备份结果
![q2](/img/upgrade/20220908144136.jpg)

### 配置数据库

配置第三方数据库

![q3](/img/upgrade/20220908145423.jpg)

### 开始部署

升级过程中，可以修改服务配置

![q3](/img/upgrade/20220908142142.jpg)

升级结果

![q4](/img/upgrade/20220908142220.jpg)

## 回滚

### 还原数据库

"选择目标组件-选择备份还原库"

![q5](/img/upgrade/20220908150134.jpg)


### 开始回滚

"点击回滚"，等待回滚结果

![q6](/img/upgrade/20220908150249.jpg)




